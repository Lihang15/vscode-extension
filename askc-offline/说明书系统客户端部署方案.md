

# 客户端部署方案
[TOC]

## vscode插件打包 

以vscode插件的方式，嵌入vscode中，打开vscode后，客户直接可以看到

        进入插件代码根目录，代码托管到公司gitlab中

        源码打包成插件
        vsce package

        环境依赖
        nodejs 18 or higher

         
        
        vscode离线安装插件
        code --install-extension vscode-plugin-sts8600document-1.0.0.vsix

打开说明书，确保插件已经安装
![](image/test9.png)
ctrl+8
ctrl+shift+p  Sts8600-Help

![](image/test7.png)

效果预览
![](image/test6.png)


## vitepress托管文档和编译  已弃用
        

        拉取vitepress项目 https://git.accotest.com/lab/vitepress-docs

        将公司文档放到vitepress下，并写好配置文件

        进入vitepress的根目录，执行 npm run docs:build 将文档编译成静态文件

        将编译后的产物.vitepress/dist目录，拖入nginx的app目录
## nginx加载vitepress打包后的静态文件 已弃用

        下载nginx->http://nginx.org/en/download.html
        选择nginx/windows-1.18.0稳定版

        启动
        start nginx 
        强制停止/完整有序停止
        nginx.exe -s stop/nginx.exe -s quit 



修改nginx配置，开放41730端口，避免端口冲突

    server {
        gzip on;
        gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

        listen 41730;
        server_name _;
    

        location / {
            # content location
            root D:/nginx-1.18.0/app/.vitepress/dist;

            index index.html;
            # exact matches -> reverse clean urls -> folders -> not found
            try_files $uri $uri.html $uri/ =404;  

            # non existent pages
            error_page 404 /404.html;

            # a folder without index.html raises 403 in this setup
            error_page 403 /404.html;

            # adjust caching headers
            # files in the assets folder have hashes filenames
            location ~* ^/assets/ {
                expires 1y;
                add_header Cache-Control "public, immutable";
            }
        }
    }

        修改配置文件后重新启动
        nginx.exe -s reload





